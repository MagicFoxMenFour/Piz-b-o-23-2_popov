# Отчет по лабораторной работе 5

# Хеш-функции и хеш-таблицы

**Группа:** ПИЖ-б-о-23-2(2)
**Дисциплина:** Анализ сложности алгоритмов
**Студент:** Попов Константин Андреевич

## Цель работы

Изучить принципы работы хеш-функций и хеш-таблиц, освоить методы разрешения коллизий, получить практические навыки реализации хеш-таблицы с различными стратегиями разрешения коллизий и провести сравнительный анализ эффективности разных методов.

## Практическая часть

### Выполненные задачи

* [x] Реализованы несколько хеш-функций для строковых ключей: простая сумма кодов символов, полиномиальная хеш-функция и DJB2.
* [x] Реализована хеш-таблица с методом цепочек с динамическим масштабированием.
* [x] Реализована хеш-таблица с открытой адресацией: линейное пробирование и двойное хеширование.
* [x] Проведен сравнительный анализ эффективности различных методов разрешения коллизий.
* [x] Исследовано влияние коэффициента заполнения на производительность.

### Ключевые фрагменты кода

Фрагменты реализованных функций и классов приведены выше: `hash_functions.py`, `hash_table_chaining.py`, `hash_table_open_addressing.py`, `HistCollision.py`, `perfomance_analysis.py`, `main.py`.

### Графики распределения коллизий

**Примеры хеш-функций и распределения коллизий при вставке случайных строк:**

<image src="./report/Simple.png" style="display:block; margin: auto;">
<div style="text-align:center; font-size: 24px">Simple hash function</div>

<image src="./report/Polynomial.png" style="display:block; margin: auto;">
<div style="text-align:center; font-size: 24px">Polynomial hash function</div>

<image src="./report/DJB2.png" style="display:block; margin: auto;">
<div style="text-align:center; font-size: 24px">DJB2 hash function</div>

### Сравнительный анализ времени выполнения

**Зависимость времени вставки от коэффициента заполнения для разных методов:**

<image src="./report/chained_hashtable.png" style="display:block; margin: auto;">
<image src="./report/linear_hashtable.png" style="display:block; margin: auto; ">
<image src="./report/double_hashtable.png" style="display:block; margin: auto; ">

**Характеристики тестового ПК:**

* Процессор: Intel Core i5-12500H @ 2.50GHz
* Оперативная память: 32 GB DDR4
* ОС: Windows 11
* Python: 3.12

### Сравнение хеш-функций

| Функция                  | Особенности                                                                                                                          | Качество распределения                                                                                                               |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------ |
| **Сумма кодов символов** | Очень простая: суммирует коды всех символов строки. Легко вычисляется.                                                               | Плохое: строки с одинаковыми символами в разном порядке дают одинаковый хеш, коллизии часты.                                         |
| **Полиномиальная (p^i)** | Использует степени числа p для каждого символа. Можно брать модуль m, чтобы ограничить размер. Позволяет учитывать порядок символов. | Хорошее: порядок символов влияет на хеш, коллизий меньше, чем у простой суммы. Выбор простого p и большого m улучшает распределение. |
| **DJB2**                 | Стартовое число 5381, каждый символ умножается на 33 (через сдвиг) и добавляется. Легко вычисляется, широко используется.            | Очень хорошее: хорошо распределяет похожие строки, меньше коллизий на практике, стабильное и быстрое.                                |

### Сравнение методов хеш-таблиц

| Тип хеш-таблицы                               | Операция | Средняя сложность | Худшая сложность |
| --------------------------------------------- | -------- | ----------------- | ---------------- |
| Метод цепочек с динамическим масштабированием | Вставка  | O(1)              | O(n)             |
|                                               | Поиск    | O(1 + α)          | O(n)             |
|                                               | Удаление | O(1 + α)          | O(n)             |
| Открытая адресация с линейным пробированием   | Вставка  | O(1)              | O(n)             |
|                                               | Поиск    | O(1)              | O(n)             |
|                                               | Удаление | O(1)              | O(n)             |
| Открытая адресация с двойным хешированием     | Вставка  | O(1)              | O(n)             |
|                                               | Поиск    | O(1)              | O(n)             |
|                                               | Удаление | O(1)              | O(n)             |

### Методы разрешения коллизий

1. **Метод цепочек:** каждый элемент корзины хранится в списке. При коллизии добавляется в конец списка. Масштабирование таблицы поддерживает низкий коэффициент заполнения.
2. **Открытая адресация с линейным пробированием:** при коллизии ищется следующая свободная ячейка по формуле (h + i \mod m). Может наблюдаться кластеризация.
3. **Открытая адресация с двойным хешированием:** используется вторая хеш-функция для шага пробирования, снижает кластеризацию по сравнению с линейным пробированием.

### Влияние хеш-функции на производительность

* Плохая функция (простая сумма кодов) → много коллизий → операции медленные.
* Хорошие функции (DJB2, полиномиальная) → равномерное распределение → операции близки к O(1).
* В открытой адресации качество хеша критично, так как коллизии влияют на всю таблицу.

## Ответы на контрольные вопросы

1. **Требования к «хорошей» хеш-функции:** равномерное распределение, детерминированность, эффективность, минимальные коллизии, чувствительность к изменениям ключа.
2. **Коллизия и методы её разрешения:** коллизия — два ключа с одинаковым хешем. Методы: цепочки и открытая адресация.
3. **Разница между цепочками и открытой адресацией:** цепочки требуют доп. памяти, открытая адресация — компактна; при высоком α цепочки растут в длину, а открытая адресация — увеличиваются пробы.
4. **Почему операции O(1) в среднем:** хеш-функция сразу вычисляет позицию, хорошие функции уменьшают коллизии, масштабирование поддерживает низкий коэффициент заполнения.
5. **Коэффициент заполнения α:** отношение элементов к размеру таблицы. Влияет на число коллизий. При превышении порога таблицу расширяют и пересчитывают элементы.
